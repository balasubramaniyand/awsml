root@opexwise-ui-demo:/var/opt/opexwise/app/media/datapipe_attachments# sh -x data_tranfer.sh
+ SOURCE_DIR=/var/opt/opexwise/app/media/datapipe_attachments
+ DEST_DIR=/var/opt/airflow/manual_uploaded_files
+ date +%Y_%m_%d_%H_%M
+ CURRENT_DATETIME=2024_07_24_02_06
+ FILENAME_PATTERN=attachments_2024_07_24_02_06.xlsx
data_tranfer.sh: 14: Syntax error: "(" unexpected
root@opexwise-ui-demo:/var/opt/opexwise/app/media/datapipe_attachments# cat data_tranfer.sh
#!/bin/bash

# Source and destination directories
SOURCE_DIR="/var/opt/opexwise/app/media/datapipe_attachments"
DEST_DIR="/var/opt/airflow/manual_uploaded_files"

# Get the current date and time in the specified format
CURRENT_DATETIME=$(date '+%Y_%m_%d_%H_%M')

# Filename pattern
FILENAME_PATTERN="attachments_${CURRENT_DATETIME}.xlsx"

# Find all files that match the pattern
FILES=(${SOURCE_DIR}/${FILENAME_PATTERN})

# Loop through the files and copy each one
for FILE in "${FILES[@]}"; do
  FILENAME=$(basename "$FILE")
  cp "$FILE" "${DEST_DIR}/$FILENAME"

  # Verify if the copy was successful
  if [ $? -eq 0 ]; then
    echo "File $FILENAME copied successfully."
  else
    echo "Failed to copy the file $FILENAME."
  fi
done
root@opexwise-ui-demo:/var/opt/opexwise/app/media/datapipe_attachments# vi data_tranfer.sh
root@opexwise-ui-demo:/var/opt/opexwise/app/media/datapipe_attachments#
